{"version":3,"file":"index.js","sources":["../src/js/reviews.js"],"sourcesContent":["import axios from 'axios';\nimport { Swiper } from 'swiper';\nimport 'swiper/css';\nimport 'swiper/css/navigation';\nimport 'swiper/css/pagination';\n\nconst API_URL = 'https://portfolio-js.b.goit.study/api/reviews';\nconst reviewsList = document.querySelector('.reviews-list');\nconst reviewsSection = document.querySelector('.reviews');\nlet hasFetchedReviews = false;\n\nasync function fetchReviews() {\n  try {\n    const response = await axios.get(API_URL);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching reviews:', error);\n    showError();\n    return [];\n  }\n}\n\nfunction renderReviews(reviews) {\n  if (!Array.isArray(reviews) || reviews.length === 0) {\n    reviewsList.innerHTML = `<p class=\"not-found\">Not found</p>`;\n    return;\n  }\n\n  reviewsList.innerHTML = reviews\n    .map(\n      review => `\n      <li class=\"swiper-slide reviews-item\">\n        <img class=\"reviews-card-img\" src=\"${review.avatar_url}\" alt=\"${review.author}\">\n        <p class=\"reviews-card-title\">${review.author}</p>\n        <p class=\"reviews-card-descr\">${review.review}</p>\n      </li>`\n    )\n    .join('');\n}\n\nfunction initSwiper() {\n  new Swiper('.swiper', {\n    slidesPerView: 1,\n    navigation: {\n      nextEl: '.next',\n      prevEl: '.prev',\n    },\n    breakpoints: {\n      768: { slidesPerView: 2, spaceBetween: 16 },\n      1440: { slidesPerView: 4, spaceBetween: 16 },\n    },\n    keyboard: { enabled: true },\n    mousewheel: { enabled: true },\n  });\n}\n\nfunction showError() {\n  reviewsList.innerHTML = `<p class=\"error-message\">Failed to load reviews. Please try again later.</p>`;\n}\n\nconst observer = new IntersectionObserver(\n  async (entries, observer) => {\n    const entry = entries[0];\n    if (entry.isIntersecting && !hasFetchedReviews) {\n      hasFetchedReviews = true;\n      observer.unobserve(reviewsSection);\n      const reviews = await fetchReviews();\n      renderReviews(reviews);\n      initSwiper();\n    }\n  },\n  { threshold: 0.05 }\n);\n\nobserver.observe(reviewsSection);\n"],"names":["API_URL","reviewsList","reviewsSection","hasFetchedReviews","fetchReviews","axios","error","showError","renderReviews","reviews","review","initSwiper","Swiper","observer","entries"],"mappings":"6vBAMA,MAAMA,EAAU,gDACVC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAiB,SAAS,cAAc,UAAU,EACxD,IAAIC,EAAoB,GAExB,eAAeC,GAAe,CAC5B,GAAI,CAEF,OADiB,MAAMC,EAAM,IAAIL,CAAO,GACxB,IACjB,OAAQM,EAAO,CACd,eAAQ,MAAM,0BAA2BA,CAAK,EAC9CC,IACO,EACR,CACH,CAEA,SAASC,EAAcC,EAAS,CAC9B,GAAI,CAAC,MAAM,QAAQA,CAAO,GAAKA,EAAQ,SAAW,EAAG,CACnDR,EAAY,UAAY,qCACxB,MACD,CAEDA,EAAY,UAAYQ,EACrB,IACCC,GAAU;AAAA;AAAA,6CAE6BA,EAAO,UAAU,UAAUA,EAAO,MAAM;AAAA,wCAC7CA,EAAO,MAAM;AAAA,wCACbA,EAAO,MAAM;AAAA,YAEhD,EACA,KAAK,EAAE,CACZ,CAEA,SAASC,GAAa,CACpB,IAAIC,EAAO,UAAW,CACpB,cAAe,EACf,WAAY,CACV,OAAQ,QACR,OAAQ,OACT,EACD,YAAa,CACX,IAAK,CAAE,cAAe,EAAG,aAAc,EAAI,EAC3C,KAAM,CAAE,cAAe,EAAG,aAAc,EAAI,CAC7C,EACD,SAAU,CAAE,QAAS,EAAM,EAC3B,WAAY,CAAE,QAAS,EAAM,CACjC,CAAG,CACH,CAEA,SAASL,GAAY,CACnBN,EAAY,UAAY,8EAC1B,CAEA,MAAMY,EAAW,IAAI,qBACnB,MAAOC,EAASD,IAAa,CAE3B,GADcC,EAAQ,CAAC,EACb,gBAAkB,CAACX,EAAmB,CAC9CA,EAAoB,GACpBU,EAAS,UAAUX,CAAc,EACjC,MAAMO,EAAU,MAAML,IACtBI,EAAcC,CAAO,EACrBE,GACD,CACF,EACD,CAAE,UAAW,GAAM,CACrB,EAEAE,EAAS,QAAQX,CAAc"}